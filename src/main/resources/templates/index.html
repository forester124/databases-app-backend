<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Databases</title>
</head>
<body>
<div class="container text-center">
    <div class="btn-group" role="group" aria-label="Basic radio toggle button group" style="margin-top: 30px;">
        <input type="radio" class="btn-check" name="database" id="mysql"
               value="mysql" autocomplete="off" checked onchange="onChangeHandler('mysql')">
        <label class="btn btn-outline-dark" for="mysql">MySQL</label>

        <input type="radio" class="btn-check" name="database" id="mongo"
               value="mongo" autocomplete="off" checked onchange="onChangeHandler('mongo')">
        <label class="btn btn-outline-dark" for="mongo">MongoDB</label>

        <input type="radio" class="btn-check" name="database" id="cassa"
               value="cassa" autocomplete="off" checked onchange="onChangeHandler('cassa')">
        <label class="btn btn-outline-dark" for="cassa">Cassandra</label>
    </div>


    <div style="margin-top: 30px;">
        <button class="btn btn-dark" type="button" data-bs-toggle="collapse" data-bs-target="#collapseExample"
                aria-expanded="false" aria-controls="collapseExample">
            Query
        </button>
        <div class="collapse" id="collapseExample">
            <form class="row g-3">
                <div class="col-md-2">
                    <label for="num_of_rows" class="form-label">Number of rows</label>
                    <input type="number" class="form-control" id="num_of_rows">
                </div>
                <div class="col-md-2">
                    <label for="fl_date" class="form-label">Flight date</label>
                    <input type="date" class="form-control" id="fl_date">
                </div>
                <div class="col-md-3">
                    <label for="origin" class="form-label">Origin</label>
                    <input type="text" class="form-control" id="origin">
                </div>
                <div class="col-md-3">
                    <label for="dest" class="form-label">Destination</label>
                    <input type="text" class="form-control" id="dest">
                </div>
                <div class="col-md-2">
                    <label for="distance" class="form-label">Distance</label>
                    <input type="number" class="form-control" id="distance">
                </div>
                <div class="col-12">
                    <label for="inputAddress" class="form-label">Address</label>
                    <input type="text" class="form-control" id="inputAddress" placeholder="1234 Main St">
                </div>
                <div class="col-12">
                    <button type="submit" class="btn btn-dark">Execute</button>
                </div>
            </form>
        </div>
    </div>
    <a class="btn btn-dark" th:href="@{/new}" style="margin-top: 20px;">Add New Flight</a>
    <div class="table-responsive" style="margin-top: 20px;">
        <table class="table table-striped table-dark">
            <thead>
            <tr>
                <th scope="col">fl_date</th>
                <th scope="col">origin</th>
                <th scope="col">dest</th>
                <th scope="col">air_time</th>
                <th scope="col">arr_delay</th>
                <th scope="col">arr_time</th>
                <th scope="col">dep_delay</th>
                <th scope="col">dep_time</th>
                <th scope="col">distance</th>
                <th scope="col">op_carrier_fl_num</th>
                <th scope="col">op_unique_carrier</th>
                <th scope="col">taxi_in</th>
                <th scope="col">taxi_out</th>
                <th scope="col">wheels_off</th>
                <th scope="col">wheels_on</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <th:block th:each="flight : ${flightList}">
                <tr>
                    <td>[[${flight.fl_date}]]</td>
                    <td>[[${flight.origin}]]</td>
                    <td>[[${flight.dest}]]</td>
                    <td>[[${flight.air_time}]]</td>
                    <td>[[${flight.arr_delay}]]</td>
                    <td>[[${flight.arr_time}]]</td>
                    <td>[[${flight.dep_delay}]]</td>
                    <td>[[${flight.dep_time}]]</td>
                    <td>[[${flight.distance}]]</td>
                    <td>[[${flight.op_carrier_fl_num}]]</td>
                    <td>[[${flight.op_unique_carrier}]]</td>
                    <td>[[${flight.taxi_in}]]</td>
                    <td>[[${flight.taxi_out}]]</td>
                    <td>[[${flight.wheels_off}]]</td>
                    <td>[[${flight.wheels_on}]]</td>
                    <td>
                        <div class="btn-group">
                            <a class="btn btn-light"
                               th:href="@{'/edit/' + ${flight.fl_date} + '&' + ${flight.origin} + '&' + ${flight.dest}}">Edit</a>
                            <a class="btn btn-light"
                               th:href="@{'/delete/' + ${flight.fl_date} + '&' + ${flight.origin} + '&' + ${flight.dest}}">Delete</a>
                        </div>
                    </td>
                </tr>
            </th:block>
            </tbody>
        </table>
    </div>
</div>
<script>
    if (this.window.location.pathname === '/') {
        document.getElementById("mysql").checked = true;
    } else if (this.window.location.pathname === '/mongo') {
        document.getElementById("mongo").checked = true;
    } else if (this.window.location.pathname === '/cass') {
        document.getElementById("cassa").checked = true;
    }


    function onChangeHandler(val) {
        if (val === 'mysql') {
            this.window.location = '/';
        } else if (val === 'mongo') {
            this.window.location = '/mongo';
        } else if (val === 'cassa') {
            this.window.location = '/cass';
        }
    }
</script>
</body>
</html>